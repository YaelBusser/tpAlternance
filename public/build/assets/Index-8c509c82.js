import{f as a,b as e,l as d,i as f,m as y,g as v,F as u,p as _,o as n,t as c,e as g}from"./app-d089a9ca.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";const b={name:"Index",data(){return{theme:"",imgs:[],page:1,searching:!0,loading:!0,loadedImages:0,totalImages:0,showSearch:!1,indexInfo:0,groupSelected:0}},mounted(){this.getDefaultSearch()},methods:{toggleSearch(){this.showSearch=!this.showSearch},loadMoreImages(){this.page++,this.loading=!0,fetch(`https://pixabay.com/api/?q=${this.theme}&page=${this.page}&per_page=9&key=37894372-c0837f7cd2c6cedbc821bb625`).then(s=>s.json()).then(s=>{this.searching=!1,this.imgs.push(...s.hits),this.totalImages=this.imgs.length,this.loading=!1}).catch(s=>{console.log(s),this.loading=!1})},async getDefaultSearch(){this.searching=!0,this.loading=!0,this.loadedImages=0,fetch(`https://pixabay.com/api/?q=nature&page=${this.page}&per_page=9&key=37894372-c0837f7cd2c6cedbc821bb625`).then(s=>s.json()).then(s=>{this.searching=!1,this.imgs=s.hits,this.totalImages=this.imgs.length}).catch(s=>{console.log(s)})},async getImgSearch(){if(this.page=1,this.searching=!0,this.loading=!0,this.loadedImages=0,!this.theme){this.getDefaultSearch();return}fetch(`https://pixabay.com/api/?q=${this.theme}&page=${this.page}&per_page=9&key=37894372-c0837f7cd2c6cedbc821bb625`).then(s=>s.json()).then(s=>{this.searching=!1,this.imgs=s.hits,this.totalImages=this.imgs.length}).catch(s=>{console.log(s)})},onImageLoad(){this.loadedImages++,this.loadedImages===this.totalImages&&(this.loading=!1)}}},I={class:"header"},k={class:"block-i"},w=e("h1",null,"GraphFinder",-1),x={key:0},L=e("p",{class:"good"},"Recherche en cours...",-1),D=[L],M={key:1},T=e("p",{class:"error"},"Aucun résultat",-1),V=[T],C={key:2},R=e("progress",{class:"pure-material-progress-circular"},null,-1),j=[R],q={class:"block-images"},z=["src","onMouseover"],B=g("Type : "),F=g("Tags : "),N=["href"],U=g("Vues : "),A=g("Téléchargements : "),E=g("Likes : "),G=g("Commentaires : "),H={class:"plus"};function J(s,o,K,O,t,i){return n(),a(u,null,[e("header",{style:d(t.showSearch?"top: -235px":"top: 50px")},[e("div",I,[e("div",k,[e("i",{class:"fa-solid fa-arrow-down",onClick:o[0]||(o[0]=(...h)=>i.toggleSearch&&i.toggleSearch(...h)),style:d(t.showSearch?"transform: rotate(0deg)":"transform: rotate(180deg)")},null,4)]),w,f(e("input",{type:"text",onInput:o[1]||(o[1]=h=>i.getImgSearch()),"onUpdate:modelValue":o[2]||(o[2]=h=>t.theme=h),class:"search",placeholder:"Rechercher un thème..."},null,544),[[y,t.theme]]),t.searching?(n(),a("div",x,D)):t.imgs.length===0?(n(),a("div",M,V)):t.loading?(n(),a("div",C,j)):v("",!0)])],4),e("div",q,[(n(!0),a(u,null,_(t.imgs.length/3,(h,r)=>(n(),a("div",{key:r,class:"image-group"},[(n(!0),a(u,null,_(t.imgs.slice(r*3,r*3+3),(l,p)=>(n(),a("div",{key:p,class:"image",style:d(t.indexInfo===p&&t.groupSelected===r?"width: 150vw":"width: 33.34vw")},[e("img",{src:l.largeImageURL,onLoad:o[3]||(o[3]=(...m)=>i.onImageLoad&&i.onImageLoad(...m)),style:d(t.loading?"opacity: 0; transform: scale(0)":"opacity: 1; transform: scale(1);"),onMouseover:m=>{t.indexInfo=p,t.groupSelected=r}},null,44,z),e("div",{class:"infos",style:d(!t.loading&&t.indexInfo===p&&t.groupSelected===r?"opacity: 1; z-index: 5; bottom: 0;":"opacity: 0;z-index: -5; bottom: -500px")},[e("p",null,[B,e("span",null,c(l.type),1)]),e("p",null,[F,e("span",null,c(l.tags),1)]),e("p",null,[e("span",null,[e("a",{href:l.largeImageURL,target:"_blank"},"lien",8,N)])]),e("p",null,[U,e("span",null,c(l.views),1)]),e("p",null,[A,e("span",null,c(l.downloads),1)]),e("p",null,[E,e("span",null,c(l.likes),1)]),e("p",null,[G,e("span",null,c(l.comments),1)])],4)],4))),128))]))),128)),e("div",H,[e("p",{onClick:o[4]||(o[4]=h=>i.loadMoreImages())},"voir plus")])])],64)}const W=S(b,[["render",J]]);export{W as default};
